# 웹 기반 RAG 시스템 (Retrieval-Augmented Generation)

### 프로젝트 개요

이 프로젝트는 웹 크롤링과 이미지 OCR을 결합한 고급 RAG(Retrieval-Augmented Generation) 시스템을 구현합니다. 특정 웹페이지의 텍스트와 이미지 내 텍스트를 추출하고, 이를 벡터 저장소에 저장하여 질의응답 시스템을 구축합니다.

**[WebBaseLoader vs UnstructuredLoader 추가 정리](https://velog.io/@ght010522/WebBaseLoader-vs-UnstructuredLoader) **

## 주요 기능

- **웹 크롤링**: BeautifulSoup을 사용한 웹 컨텐츠 및 이미지 URL 추출
- **이미지 OCR**: Google Cloud Vision API를 사용한 이미지 내 텍스트 인식
- **문서 처리**: 문서 로딩, 분할 및 벡터화
- **벡터 검색**: FAISS를 사용한 효율적인 유사도 검색
- **자연어 응답 생성**: OpenAI의 GPT 모델을 활용한 질의응답

## Tech Stack

| Category                    | Name / Library                                      | Description |
|----------------------------|-----------------------------------------------------|-------------|
| **Programming Language**    | Python 3.10+                                        | - |
| **Frameworks & Libraries** | LangChain (`langchain`, `langchain-openai`, `langchain-community`, `langchain-text-splitters`) | LLM 기반 문서 처리, 벡터 검색, Prompt 템플릿 구성 등 |
|                            | BeautifulSoup4 (`bs4`)                              | HTML 웹 페이지에서 콘텐츠 및 이미지 URL 크롤링 |
|                            | Unstructured                                        | 웹 문서의 구조적 콘텐츠 추출용 |
|                            | FAISS                                               | 문서 임베딩 기반 벡터 검색 |
|                            | Google Cloud Vision API                             | 이미지에서 텍스트를 추출하는 OCR 처리 |
| **LLM & Embedding Providers** | OpenAI GPT-4o-mini (`ChatOpenAI`)                  | 사용자 질문에 대한 응답 생성 |
|                            | OpenAIEmbeddings                                    | 문서 임베딩 생성 |
| **Utilities**              | `dotenv`                                            | `.env` 파일을 통한 환경변수 관리 |
|                            | `requests`                                          | 웹 페이지 및 이미지 요청 처리 |



## 사용 방법

1. API 키 설정:
   - `.env` 파일을 생성하고 OpenAI API 키 설정 `OPENAI_API_KEY=your_openai_api_key`
   - Google Cloud Vision API 키 파일 준비

2. Google Cloud Vision API 인증 파일 경로 설정
```python
os.environ["GOOGLE_APPLICATION_CREDENTIALS"] = "path/to/your/vision-api-key.json"
```

3. 크롤링할 웹 URL 설정
```python
url = "https://your-target-website.com"
```

4. 코드 실행:
   - 웹 크롤링 및 이미지 추출
   - OCR을 통한 이미지 텍스트 추출
   - 문서 분할 및 벡터화
   - 질의응답 시스템 실행

## 시스템 구조

1. **데이터 수집 단계**
   - 웹 크롤링을 통한 텍스트 및 이미지 URL 추출
   - Vision API를 통한 이미지 내 텍스트 인식

2. **데이터 처리 단계**
   - 문서 로딩 및 정규화
   - 텍스트 분할(chunking)
   - 임베딩 생성

3. **검색 및 생성 단계**
   - 사용자 질문에 관련된 문서 검색
   - 검색된 컨텍스트와 질문을 바탕으로 응답 생성

## Workflow Diagram
<img src="./workflow%20diagram.png" alt="Workflow Diagram" width="66%">

## 주의사항

- Google Cloud Vision API와 OpenAI API는 사용량에 따라 비용이 발생할 수 있습니다.
- 웹 크롤링 시 대상 웹사이트의 이용약관을 준수해야 합니다.
- 이미지 크기와 수에 따라 처리 시간이 길어질 수 있습니다.

# 실험 결과: 사이트에 있는 이미지 OCR을 통하여 세부적인 내용을 포함한 RAG

1. 내용의 차이
- **Answer without OCR**은 간결하고 핵심적인 정보를 전달하는 데 초점을 맞추고 있습니다. 하지만 일부 표현이 다소 간략하여 독자가 세부적인 내용을 이해하기 어려울 수 있습니다.
- **Answer with OCR**은 문장 표현이 더 상세하고 설명적입니다. 특히, 주요 기능에 대한 설명이 더 구체적이고 사용자 경험을 강조합니다.

2. 장단점
**Answer without OCR**
장점: 간결하고 읽기 쉬움. 빠르게 정보를 얻고자 하는 독자에게 적합.
단점: 세부 정보가 부족하여 프로젝트의 독창성이나 차별점을 충분히 전달하지 못할 수 있음.
**Answer with OCR**
장점: 각 프로젝트의 기능과 가치를 더 잘 전달하며, 독자가 프로젝트의 목적과 유용성을 쉽게 이해할 수 있음.
단점: 텍스트가 길어져 가독성이 떨어질 수 있음.

## Answer without OCR

``` ### ALL-in 코딩 공모전 수상작 요약

1. **대상: Lexi Note**
   - **개발자:** 다나와(김다애, 박나경)
   - **주요 기능:** 단어를 드래그하면 네이버 사전과 번역기와 연동되어 한 번에 필기하고 학습할 수 있는 웹 서비스. 언어 학습에 필요한 할 일 목록과 스케줄 템플릿을 제공하여 효율적인 공부 지원.

2. **우수상: 에코 클래스룸**
   - **개발자:** This is 스파게티!!!(박지성, 김서원, 박범수)
   - **주요 기능:** 교수와 학생 간의 실시간 소통을 지원하며, 학생들이 익명으로 질문하고 의견을 제출할 수 있는 서비스. 교수는 학생들의 이해도를 파악하고, 피드백 및 퀴즈를 통해 수업 속도를 조절할 수 있음.

3. **우수상: 우리집 히어로즈**
   - **개발자:** 인트(배정연, 한지수)
   - **주요 기능:** 자취생들이 자취방에서 겪는 벌레 문제를 해결하기 위한 매칭 서비스. 사용자는 벌레 퇴치 요청을 하고, 신원 보장된 ‘히어로’와 매칭되어 문제를 해결함.

4. **입선: BLOTIE**
   - **개발자:** 블로티(이은주, 한명수, 황준영)
   - **주요 기능:** 외국인 학생과 한국인 학생의 1:1 매칭 기능을 통해 문화와 언어를 자연스럽게Learning 및 교류 지원. 실시간 채팅과 피드 기능 제공.

5. **입선: Crewing**
   - **개발자:** 동학대학운동(김민아, 임경진, 신은혜, 고수)
   - **주요 기능:** 대학생들이 다양한 연합 동아리에 쉽게 가입하고 적절한 동아리를 찾을 수 있도록 지원하는 플랫폼. 동아리 후기와 정보를 제공.

6. **입선: 학교생활 매니저**
   - **개발자:** 아이칼F4(조민제, 이민기, 강건, 박근우)
   - **주요 기능:** 학교 생활을 효율적으로 관리하도록 돕는 앱. 일정 관리, 과제 관리, 성적 예측, 공지사항 업데이트 등의 기능 제공.

이상 ALL-in 코딩 공모전의 수상작들을 요약하였습니다.
```

## Answer with OCR

``` 
### ALL-in 코딩 공모전 수상작 요약

1. **대상 - Lexi Note**
   - **개발자**: 다나와(김다애, 박나경)
   - **주요 기능**: 언어 공부를 위한 필기 웹 서비스로, 단어를 드래그하여 사전으로 연동하고, 번역기가 통합되어 있어 번역과 학습을 동시에 수행할 수 있습니다. 할 일 목록과 스케줄 템플릿을 제공하여 효율적인 학습을 지원합니다.

2. **우수상 - 우리집 히어로즈**
   - **개발자**: 인트(배정연, 한지수)
   - **주요 기능**: 벌레 퇴치 영웅과 자취생을 매칭하는 서비스입니다. 사용자는 벌레 문제를 해결할 수 있는 "히어로"를 요청하며, 안전한 환경에서 신원을 보장받고 실시간 알림을 통해 매칭 정보를 받아볼 수 있습니다.

3. **우수상 - 에코 클래스룸**
   - **개발자**: This is 스파게티!!!(박지성, 김서원, 박범수)
   - **주요 기능**: 교수가 학생들의 이해도를 실시간으로 파악할 수 있도록 돕는 수업 소통 서비스입니다. 학생은 익명으로 질문이나 의견을 제출할 수 있으며, 교수는 수업 속도를 조절할 수 있는 퀴즈 및 평가 기능을 갖추고 있습니다.

4. **입선 - Crewing**
   - **개발자**: 동학대학운동(김민아, 임경진, 신은혜, 고수)
   - **주요 기능**: 대학생들이 적절한 연합 동아리를 찾을 수 있도록 지원하는 플랫폼입니다. 사용자 맞춤형 동아리 추천 및 리크루팅 과정 관리 기능을 제공합니다.

5. **입선 - 학교생활 매니저**
   - **개발자**: 아이칼F4(조민제, 이민기, 강건, 박근우)
   - **주요 기능**: 학교 생활을 관리할 수 있는 앱으로, 일정 관리, 성적 예측, 학점 계산 등 다양한 기능을 통해 대학생들이 효율적으로 학업을 관리할 수 있도록 돕습니다.

6. **입선 - BLOTIE**
   - **개발자**: 블로티(이은주, 한명수, 황준영)
   - **주요 기능**: 외국인 학생과 한국인 학생을 매칭하는 플랫폼으로, 서로의 언어 및 문화를 배우고 교류할 수 있는 기회를 제공합니다. 1:1 매칭 기능과 실시간 채팅 기능이 포함되어 있습니다.

이상으로 ALL-in 코딩 공모전의 모든 수상작을 요약하였습니다. 각 서비스는 대학생들이 겪는 실질적인 문제를 해결하기 위한 창의적인 아이디어에서 출발하여, 다양한 기능을 통해 사용자 경험을 향상시키고 있습니다.
```